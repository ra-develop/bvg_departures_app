# BVG Departures App

A Flutter application to display upcoming departures for a selected BVG stop, built with clean architecture and Riverpod.

## Features
- Search for BVG stops with autocomplete suggestions
- Select a stop to view the next 30 departures
- Display departure details: transport type, name, icon, direction, planned departure, delays, and platform
- Clear search and start a new search
- Responsive UI for iOS and Android

## Prerequisites
- Flutter 3.32.0
- Android SDK 35
- Xcode 16 (for iOS)
- Dart 3.0.0 or higher

## Setup
1. Clone the repository:
   ```bash
   git clone https://github.com/ra-develop/bvg_departures_app.git
   ```
2. Install dependencies:
   ```bash
   flutter pub get
   ```
3. Generate JSON serialization code:
   ```bash
   dart run build_runner build --delete-conflicting-outputs
   ```
4. Run the app:
   ```bash
   flutter run -t lib/main.dart
   ```

## Build APK
```bash
flutter build apk -t lib/main.dart
```

## Dependencies
- `flutter_riverpod`: Flutter state management
- `dio`: HTTP client
- `json_annotation`: JSON serialization
- `go_router`: Navigation
- `flutter_typeahead`: Autocomplete search
- `equatable`: Value equality
- `intl`: Date formatting
- `flutter_svg`: An SVG rendering and widget library

## Design Notes
### Foundations 
- Typography: `Inter` Google font family (Medium and SemiBold weights) 
- Colors: BVG Blue styling, white surface, black text, state-layer overlay

   [Foundations.pdf](/documentation/design_notes/Foundations.pdf)

### Components 
- Components: Top app bar, full-screen search, list items with state-layer overlay 

   [Components.pdf](/documentation/design_notes/Components.pdf)

### Layouts [](/documentation/design_notes/Layouts.pdf)
- Layouts: Based on 1.0_index and 2.0_Search_FullScreen* from Layouts.pdf

   [Layouts ](/documentation/design_notes/Layouts.pdf)

## API
- Uses BVG public REST API: https://v6.bvg.transport.rest
- Endpoints:
  -  `/stops` for search a stops,
  -  `/stops/{stopId}` get full stop information
  -   `/stops/{stopId}/departures` for get departures from selected stop

## Notes
- The project assumes Material Design icons for transport types; custom icons can be added as per design documents.
- Run `dart run build_runner watch --delete-conflicting-outputs` for continuous code generation during development.

## Viewing docs 

The project documentation has automated generated by GitHub Actions and published  on the on GitHub Pages at this [link](https://ra-develop.github.io/bvg_departures_app/).

Alternatively, the documentation can be viewed locally by switching to the gh-pages branch:

```bash
git switch gh-pages
```

(Detailed manual [here](https://pub.dev/packages/dartdoc#viewing-docs)).

To enable navigation and search, the generated docs must be served with an HTTP server.

An easy way to run an HTTP server locally is to use [`package:dhttpd`](https://pub.dev/packages/dhttpd). For example:

```bash
dart pub global activate dhttpd
dart pub global run dhttpd --path .
```

To then read the generated docs in your browser, open the link that `dhttpd` outputs, usually `http://localhost:8080`.

